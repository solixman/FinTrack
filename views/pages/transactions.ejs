<div class="container my-4">
  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold">Transactions</h2>
    <!-- Button to open modal -->
    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#transactionModal">
      + New Transaction
    </button>
  </div>

  <!-- Transactions Table -->
  <div class="card shadow-sm">
    <div class="card-body">
      <table class="table table-striped align-middle">
        <thead class="table-dark">
          <tr>
            <th>Date</th>
            <th>Amount</th>
            <th>Type</th>
          </tr>
        </thead>
        <tbody>
          <% if (transactions && transactions.length > 0) { %>
            <% transactions.forEach(t => { %>
              <tr>
                <td><%= new Date(t.date).toLocaleDateString() %></td>
                <td><%= t.amount %></td>
                <td>
                  <span class="badge <%= t.type === 'income' ? 'bg-success' : 'bg-danger' %>">
                    <%= t.type %>
                  </span>
                </td>
              </tr>
            <% }) %>
          <% } else { %>
            <tr>
              <td colspan="3" class="text-center text-muted">No transactions yet.</td>
            </tr>
          <% } %>
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- Transaction Modal -->
<div class="modal fade" id="transactionModal" tabindex="-1" aria-labelledby="transactionModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <form action="/transaction/create" method="POST">
        <div class="modal-header">
          <h5 class="modal-title" id="transactionModalLabel">New Transaction</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>

        <div class="modal-body">
          <!-- Amount -->
          <div class="mb-3">
            <label for="amount" class="form-label">Amount</label>
            <input type="number" step="0.01" class="form-control" id="amount" name="amount" required>
          </div>

          <!-- Type -->
          <div class="mb-3">
            <label for="type" class="form-label">Type</label>
            <select class="form-select" id="type" name="type" required>
              <option value="" disabled selected>-- Select Type --</option>
              <option value="income">Income</option>
              <option value="expense">Expense</option>
            </select>
          </div>

          <!-- Category -->
          <div class="mb-3">
            <label for="categoryId" class="form-label">Category</label>
            <select class="form-select" id="categoryId" name="categoryId" required>
              <option value="" disabled selected>-- Select Category --</option>
              <% if (categories && categories.length > 0) { %>
                <% categories.forEach(c => { %>
                  <option value="<%= c.id %>"><%= c.name %></option>
                <% }) %>
              <% } %>
            </select>
          </div>

          <!-- Date -->
          <div class="mb-3">
            <label for="date" class="form-label">Date</label>
            <input type="date" class="form-control" id="date" name="date" required>
          </div>

          <!-- Note -->
          <div class="mb-3">
            <label for="note" class="form-label">Note</label>
            <textarea class="form-control" id="note" name="note" rows="2"></textarea>
          </div>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="submit" class="btn btn-primary">Save Transaction</button>
        </div>
      </form>
    </div>
  </div>
</div>
